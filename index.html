<!DOCTYPE html>
<html>
<head>
    <title>Tư vấn Online cùng ThS BS Lê Hoàng Vinh</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Styles như cũ */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>TƯ VẤN ONLINE CÙNG<br><span class="doctor-name">ThS.BS LÊ HOÀNG VINH</span></h1>
            <p>Điền form để đăng ký tư vấn online 1:1 cùng Thạc sĩ Bác sĩ Lê Hoàng Vinh</p>
        </div>

        <form id="consultationForm" action="https://script.google.com/macros/s/AKfycbwjGdLP43xK-pDuRscxBluv6CuGtgj1FRg1K-9oyFWcJ1jgVOWsStylmOcW1XS2_Lon7g/exec" method="POST">
            <div class="form-group">
                <h3>1. Họ và tên <span class="required">*</span></h3>
                <input type="text" name="Họ và tên" required>
            </div>

            <div class="form-group">
                <h3>2. Nơi ở hiện tại <span class="required">*</span></h3>
                <input type="text" name="Nơi ở hiện tại" required>
            </div>

            <div class="form-group">
                <h3>3. Dịch vụ làm đẹp <span class="required">*</span></h3>
                <textarea name="Dịch vụ làm đẹp" rows="4" required></textarea>
            </div>

            <div class="form-group">
                <h3>4. Thông tin liên hệ <span class="required">*</span></h3>
                <p style="color: #666; margin-bottom: 15px;">Vui lòng chọn phương thức liên hệ bạn mong muốn:</p>
                
                <div class="contact-option">
                    <input type="checkbox" id="phone" name="contact_method" onchange="toggleContactField('phone')">
                    <label for="phone" style="display: inline;">Số điện thoại</label>
                    <div id="phoneField" class="contact-field" style="display: none;">
                        <input type="tel" name="phone" placeholder="Nhập số điện thoại của bạn">
                    </div>
                </div>

                <div class="contact-option">
                    <input type="checkbox" id="zalo" name="contact_method" onchange="toggleContactField('zalo')">
                    <label for="zalo" style="display: inline;">Zalo</label>
                    <div id="zaloField" class="contact-field" style="display: none;">
                        <input type="tel" name="zalo" placeholder="Nhập số Zalo của bạn">
                    </div>
                </div>

                <div class="contact-option">
                    <input type="checkbox" id="line" name="contact_method" onchange="toggleContactField('line')">
                    <label for="line" style="display: inline;">LINE</label>
                    <div id="lineField" class="contact-field" style="display: none;">
                        <input type="text" name="line" placeholder="Nhập ID LINE của bạn">
                    </div>
                </div>

                <div class="contact-option">
                    <input type="checkbox" id="viber" name="contact_method" onchange="toggleContactField('viber')">
                    <label for="viber" style="display: inline;">Viber</label>
                    <div id="viberField" class="contact-field" style="display: none;">
                        <input type="tel" name="viber" placeholder="Nhập số Viber của bạn">
                    </div>
                </div>

                <div class="contact-option">
                    <input type="checkbox" id="whatsapp" name="contact_method" onchange="toggleContactField('whatsapp')">
                    <label for="whatsapp" style="display: inline;">WhatsApp</label>
                    <div id="whatsappField" class="contact-field" style="display: none;">
                        <input type="tel" name="whatsapp" placeholder="Nhập số WhatsApp của bạn">
                    </div>
                </div>
            </div>

            <button type="submit">Gửi đăng ký tư vấn</button>
        </form>

        <div id="loading">Đang gửi thông tin...</div>
        <div id="success">Đăng ký tư vấn thành công! Chúng tôi sẽ liên hệ với bạn sớm.</div>
        <div id="error">Có lỗi xảy ra. Vui lòng thử lại sau.</div>
    </div>

    <script>
        function toggleContactField(fieldName) {
            const field = document.getElementById(fieldName + 'Field');
            const checkbox = document.getElementById(fieldName);
            if (checkbox.checked) {
                field.style.display = 'block';
            } else {
                field.style.display = 'none';
                const input = field.querySelector('input');
                if (input) input.value = ''; // Clear the value if unchecked
            }
        }

        document.getElementById('consultationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const checkedMethods = document.querySelectorAll('input[name="contact_method"]:checked');
            if (checkedMethods.length === 0) {
                alert('Vui lòng chọn ít nhất một phương thức liên hệ');
                return;
            }

            let isValid = true;
            checkedMethods.forEach(method => {
                const fieldId = method.id + 'Field';
                const input = document.querySelector(`#${fieldId} input`);
                if (!input.value.trim()) {
                    isValid = false;
                    input.style.borderColor = 'red'; // Highlight the empty field
                }
            });

            if (!isValid) {
                alert('Vui lòng điền đầy đủ thông tin cho các phương thức liên hệ đã chọn');
                return;
            }

            document.getElementById('loading').style.display = 'block';

            const formData = {
                'Họ và tên': this.querySelector('[name="Họ và tên"]').value,
                'Nơi ở hiện tại': this.querySelector('[name="Nơi ở hiện tại"]').value,
                'Dịch vụ làm đẹp': this.querySelector('[name="Dịch vụ làm đẹp"]').value,
                'phone': document.getElementById('phone').checked ? this.querySelector('[name="phone"]').value : '',
                'zalo': document.getElementById('zalo').checked ? this.querySelector('[name="zalo"]').value : '',
                'line': document.getElementById('line').checked ? this.querySelector('[name="line"]').value : '',
                'viber': document.getElementById('viber').checked ? this.querySelector('[name="viber"]').value : '',
                'whatsapp': document.getElementById('whatsapp').checked ? this.querySelector('[name="whatsapp"]').value : ''
            };

            fetch('https://script.google.com/macros/s/AKfycbwjGdLP43xK-pDuRscxBluv6CuGtgj1FRg1K-9oyFWcJ1jgVOWsStylmOcW1XS2_Lon7g/exec', {
                method: 'POST',
                body: JSON.stringify(formData),
                mode: 'no-cors'
            })
            .then(response => {
                document.getElementById('loading').style.display = 'none';
                window.location.href = 'thanks.html';
            })
            .catch(error => {
                document.getElementById('loading').style.display = 'none';
                document
